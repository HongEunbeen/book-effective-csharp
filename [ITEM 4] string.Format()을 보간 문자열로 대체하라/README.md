## 문자열 보간 기능

C# 6.0에 새롭게 도입된 기능으로 고전적인 문자열 포매팅 방식에 비해 장점이 많습니다.

**문자열 보간 기능 장점**

- 코드 가독성이 대폭 향상됩니다.
- 컴파일러 입장에서는 정적 타입 검사를 수행할 수 있습니다. (개발자의 실수 방지 가능)
- 기존 방식에 비해 문자열을 생성하기 위한 표현식이 더 풍성합니다.

**기존 string.Format()의 단점**

- 포맷 문자열과 인자 리스트를 분리하여 전달하는 구조이기에 생성된 문자열을 직접 출력해보기 전가지 코드 제대로 작성 여부 확인이 어렵습니다.
- 포맷 문자열의 인자의 개수와 실제 전달되는 인자의 개수를 확인하지 않기에 실수하면 런타임 에러가 발생합니다.
- 포맷 문자열과 출력할 내용으르 담고 있는 배열을 나누어 전달 시 인자의 순서 확인 어렵습니다.

단점이 큰 문제는 아니지만 제법 시간을 낭비하는 작업이기에

새롭게 추가된 문자열 보간 기능을 이용하면 올바른 코드를 작성할 수 있습니다.

## 문자열 보간 기능 사용법

```csharp
Console.WriteLine($"The value of pi is {Math.PI}");
```

- 문자열 앞에 `$` 붙이면 됩니다.
- 문자열로 변경할 표현식은 `{}` 내에 둡니다. (대체 문자열)
- `string.Format()` 구현 시 사용한 라이브러리를 거의 동이랗게 상

**대체 문자열의 제약사항**

`if/else` `while` 과 같은 제어흐름을 변경하는 코드를 사용할 수 없습니다.

만약, 필요시에는 다른 메서드를 정의해 구현하고, 대체 문자열에서 메서드를 호출하는 방법으로 구현해야 합니다.

## 문자열 보간 기능 특징

**string.Format() 구현 시 사용한 라이브러리 사용**

```csharp
Console.WriteLine($"The value of pi is {Math.PI}");
```

실제 C# 컴파일러는 param을 이용해 obejct 배열을 전달하는 기존 포매팅 함수를 호출하도록 코드를 생성합니다.

이때, object 타입으로 변경하기 위한 박싱이 일어나기에 전달할 인자를 사전에 문자열로 변경하면 값 타입이 박싱되는 것을 피할 수 있습니다.

```csharp
Console.WriteLine($"The value of pi is {Math.PI.ToString()}");
```

**내장된 표준 포맷 문자열 사용**

```csharp
Console.WriteLine($"The value of pi is {Math.PI:F2}");
```

`{}` 사이에 `:`과 포맷 문자열을 추가하면 됩니다.

이때, 주의할 점은 `:` 기호는 조건 표현식을 나타내는 용도로도 사용되기 때문에 조건 표현식을 문자열 보간 기능과 같이 사용하게 되면 충돌이 발생합니다.

```csharp
Console.WriteLine($"The value of pi is {(routn ? Math.PI.ToString() : Math.PI.ToString("F2"))}");
```

이렇게 조건표현식을 사용하려면 컴파일러에서  `:` 이 포맷 문자열이 아닌 조건 표현식의 일부임을 알려야 합니다.

**null 조건 연산자와 null 병합 연산자의 사용**

```csharp
Console.WriteLine($"The customer's name is {c?.Name ?? "Name is missing"}");
```

`{}` 내의 표현식은 이미 유효한 C# 표현식으로 `null 조건 연산자`와 `null 병합 연사자`를 함께 사용할 수 있습니다.

**중첩된 표현식**

`{}` 문자 사이의 모든 구문은 C# 코드의 일부인 동시에 표현식으로 간주되기 때문에 보간 문자열의 표현식은 중첩해서 사용이 가능합니다.

**LINQ 쿼리 구문과 함께 사용**

[**ASP.NET](http://ASP.NET) MVC의 Razor View 엔진에서 사용**

웹 응용 프로그램 내에서 HTML 결과물을 쉽게 생성할 수 있습니다. 

```html
<a asp-constroller="Manage" asp=action="Index" title="Manage"> </a>
```

이를 이용하면 원하는 출력 결과를 더 간결하게 표현할 수 있습니다.

## 🤔 SQL 쿼리에서도 사용해도 되나요?

어떤 경우라도 문자열 보간 긴으의 결과는 문자열이라는 사실을 잊어서는 안됩니다. 그저 단일의 문자열을 생성할 뿐입니다.

문자열 보간 기능은 매개변수화된 SQL 쿼리를 생성하지 않습니다.

객체나 데이터로 재해석이 필요한 문자열 생성에서는 문자열 보간 기능을 사용시 주의해야 합니다.

정리

- 기존 방식인 `string.Format()`는 오류를 유발할 가능성이 높습니다.
- 문자열 보간 기능은 실수를 줄일 수 있고 더욱 강력할 뿐 아니라 활용도 또한 매우 높은 기술입니다.
