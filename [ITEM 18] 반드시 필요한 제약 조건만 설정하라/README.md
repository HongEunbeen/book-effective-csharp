## 타입 매개변수에 대한 제약 조건

클래스가 작업을 올바르게 수행하기 위해 타입 매개변수로 전달할 수 있는 타입의 유형을 제한하는 방법입니다.

제약 조건을 설정하지 않으면 런타임에 더 많은 검사를 수행할 수 밖에 없습니다.

반면에 불필요한 제약 조건을 설정하면 이 클래스를 사용하기 위해 과도하게 추가 작업을 해야 합니다.

## 제약 조건 설정의 정확성

C# 컴파일러는 제네릭 타입에 대해 올바른 IL을 생성해야 할 책임이 있으며, 충분한 정보가 없더라도 반드시 올바른 IL을 생성해야 합니다.

만약, 타입 매개변수의 타입에 대한 정보가 정확하지 않다면 컴파일러는 System.Object가 정의하고 있는 최소한의 기능만 제공하는 타입이라고 가정합니다.

→ 이렇게 된다면 기본적인 작업조차 제대로 컴파일되지 않을 수 있습니다.

컴파일러에게 제약 조건을 알려준다는 것은 제네릭 타입에서 타입 매개변수로 주어진 타입은 System.Object에서 노출하는 수준 이상으로  사용할 수 있습니다.

## 제약 조건 설정의 장점

### [제네릭 타입 작성시 도움]

컴파일러는 타입 매개변수로 전달된 타입이 제약 조건으로 설정한 기능을 모두 구현하고 있을 것이라 가정할 수 있습니다.

제네릭 타입에 제약 조건이 없다면 타입의 오용 가능, 사용자의 잘못된 예측으로 런타임 오류 등을 방지할 수 없습니다.

### [타입을 컴파일타임에 확인 가능]

컴파일러는 제네릭 타입을 사용하는 사용자가 타입 매개변수로 올바른 타입을 지정했는지 컴파일타임에 확인 할 수 있습니다.

## 제약 조건을 최소화하기 위한 방법

타입 매개변수에 제약 조건을 많이 설정하면 제네릭 타입을 사용하는 것이 큰 부담이 됩니다.

### [제네릭 타입 내에서 반드시 필요한 기능만]

제네릭 타입 내에서 반드시 필요한 기능만을 제약 조건을 설정합니다.

C# 컴파일러는 제약 조건에 설정된 정보만을 이용해 IL을 생성합니다. 즉, 제네릭 타입을 컴파일할 때 알려진 내용이 아니라면 사용하지 않습니다.

### [타입을 확인한 후 사용]

제약 조건을 설정하지 않고 타입 매개변수로 주어진 타입을 런타임에 확인한 후 더 나은 메서드가 있는지 살펴봅니다.

Equataqble<T>와 Comparable<T>는 이런 식으로 설계되고 구현되어 있습니다.

## new(), structm class의 제약조건

new(), struct, class에 제약 조건을 추가함녀 객체를 생성하는 방식을 가정할 수 있습니다.

이 세 가지 제약 조건은 가능한 한 피하는 것이 좋습니다. 

### [default()]

default() : 특정 타입의 기본값을 가져오는데, 값 타입에 대해서는 0을, 참조 타입에 대해서는  null을 가져옵니다.

죽, new()를 default()로 바꾸면 값 타입, 참조 타입 모두 사용이 가능합니다.

기본 생성자 제약 조건을 설정할 때는 new 대신 default()를 사용합니다.

타입 매개변수로 지정한 타입의 기본값을 가져오기 위해 default()를 자주 사용합니다.

## 정리

- 제네릭 타입을 사용할 사용자에게 개발자가 가정하고 있는 바를 알려주려면 제약 조건을 설정해야 합니다.
- 필요한 최소한의 제약 조건만을 설정해야 합니다.
- 타입 매개변수로 지정할 타입의 유형에 대해 명확한 가정이 필요하다면 반드시 제약 조건을 설정해야 합니다.
